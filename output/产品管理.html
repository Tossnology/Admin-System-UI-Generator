<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>产品管理</title>    <link rel="stylesheet" href="layui/css/layui.css">    <script src="layui/layui.js"></script></head><body><div class="layui-form">    <!-- 此处可以编写个性化搜索 -->    <lable class="layui-form-label">id</lable>    <div class="layui-inline">        <input class="layui-input" id="searchName" type="text">    </div>    <button type="button" class="layui-btn" id="searchAnything">        <i class="layui-icon">&#xe615;</i>    </button></div><!-- 凡是看见department都用htmlId替换 --><table id="product" lay-filter="productTable"></table><!---------------------添加科室表格 start-------------------------------><form class="layui-form" id="addProduct" style="display: none;padding: 20px 30px 0 0" lay-filter="insertFilter">    <div class="layui-form-item">        <label class="layui-form-label">ID</label>        <div class="layui-input-inline">            <input type="text" name="ID" placeholder="请输入ID" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">图片</label>        <div class="layui-input-inline">            <input type="text" name="图片" placeholder="请输入图片" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">产品名称</label>        <div class="layui-input-inline">            <input type="text" name="产品名称" placeholder="请输入产品名称" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">产品小标题</label>        <div class="layui-input-inline">            <input type="text" name="产品小标题" placeholder="请输入产品小标题" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">原价格</label>        <div class="layui-input-inline">            <input type="text" name="原价格" placeholder="请输入原价格" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">优惠价格</label>        <div class="layui-input-inline">            <input type="text" name="优惠价格" placeholder="请输入优惠价格" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">库存数量</label>        <div class="layui-input-inline">            <input type="text" name="库存数量" placeholder="请输入库存数量" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <div class="layui-input-block">            <button class="layui-btn" lay-submit lay-filter="addSubmit">立即提交</button>            <button type="reset" class="layui-btn layui-btn-primary">重置</button>        </div>    </div></form><!---------------------添加文章表格 end-------------------------------><!---------------------修改文章表格 start-------------------------------><form class="layui-form" id="updateProduct" style="display: none;padding: 20px 30px 0 0" lay-filter="updateFilter">    <div class="layui-form-item">        <label class="layui-form-label">ID</label>        <div class="layui-input-inline">            <input type="text" name="ID" placeholder="请输入ID" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">图片</label>        <div class="layui-input-inline">            <input type="text" name="图片" placeholder="请输入图片" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">产品名称</label>        <div class="layui-input-inline">            <input type="text" name="产品名称" placeholder="请输入产品名称" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">产品小标题</label>        <div class="layui-input-inline">            <input type="text" name="产品小标题" placeholder="请输入产品小标题" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">原价格</label>        <div class="layui-input-inline">            <input type="text" name="原价格" placeholder="请输入原价格" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">优惠价格</label>        <div class="layui-input-inline">            <input type="text" name="优惠价格" placeholder="请输入优惠价格" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">库存数量</label>        <div class="layui-input-inline">            <input type="text" name="库存数量" placeholder="请输入库存数量" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <div class="layui-input-block">            <button class="layui-btn" lay-submit lay-filter="updateSubmit">立即提交</button>            <button type="reset" class="layui-btn layui-btn-primary">重置</button>        </div>    </div></form><!---------------------修改文章表格 end-------------------------------><!--===============添加、批量删除工具条 start===================--><script type="text/html" id="toolbar2">    <a class="layui-btn layui-btn-sm" lay-event="add">添加</a>    <a class="layui-btn layui-btn-sm layui-btn-danger" lay-event="deleteMany">批量删除</a></script><!--===============添加、批量删除工具条 end  ===================--><script type="text/html" id="image_">    <a class="layui-btn layui-btn-xs layui-btn-normal" lay-event="gotoImage_">详情</a></script><script type="text/html" id="operations">    <a class="layui-btn layui-btn-xs layui-btn-normal" lay-event="setProperty">设置属性</a></script><!--===============删除、修改工具条 start===================--><script type="text/html" id="toolbar1">    <a class="layui-btn layui-btn-xs" lay-event="update">修改</a>    <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="delete">删除</a></script><!--===============删除、修改工具条 end   ===================--><script>    layui.use(["form","layer","table"],function () {var loc=location.href;var n1=loc.length;var n2=loc.indexOf("=");var id=decodeURI(loc.substr(n2+1, n1-n2));        var form = layui.form;        var layer = layui.layer;        var table = layui.table;        var $ = layui.$;        table.render({            elem:"#product",            limit:5,            limits:[5,10,15],            url:"product/select.do?id=" + id,            page:true,            toolbar:"#toolbar2",            cols:[[                {type:"checkbox"},                {field:"id",title:"ID"},                {field:"image",title:"图片"},                {field:"name",title:"产品名称"},                {field:"stitle",title:"产品小标题"},                {field:"oprice",title:"原价格"},                {field:"lprice",title:"优惠价格"},                {field:"number",title:"库存数量"},                {title:"图片管理",toolbar:'#image_'},                {title:"操作",toolbar:'#operations'},                {title:"修改/删除",toolbar:'#toolbar1'}            ]]        });        $("#searchAnything").click(function () {            table.reload('product',{                where:{                    id:$("#searchName").val(),                },                page:{                    curr:1                }            })        });        table.on('toolbar(productTable)',function (obj) {            var checkStatus = table.checkStatus(obj.config.id);            console.log(obj.config.id);            if(obj.event =='add'){                layer.open({                    type:1,                    content:$("#addProduct"),                    area:["400px","350px"],                    title:'添加产品'                })            }else if(obj.event == 'deleteMany'){                var array = checkStatus.data;                if(array.length == 0){                    layer.msg("请至少选择一个复选框",{icon:5,time:2000});                    return;                }                layer.confirm("检查一下别错删哦！",{icon:6},function () {                    var ids = [];                    for(var i=0;i<array.length;i++){                        ids.push(array[i].id);                    }                    $.ajax({                        url:"product/deleteMany.do",                        data:"ids="+ids,                        dataType:"json",                        success:function (data) {                            if(data.isDelete){                                layer.msg("删除成功",{icon:6,time:2000});                                table.reload('product')                            }else{                                layer.msg("删除失败",{icon:5,time:2000});                            }                        }                    })                })            }        });        table.on('tool(productTable)',function (obj) {            if(obj.event =='update'){                $.ajax({                    url:"product/selectOne.do",                    data:"id="+obj.data.id,                    dataType:"json",                    success:function (data) {                        form.val('updateFilter',{                            id:data.id,                            name:data.name,                            telephone:data.telephone,                            area:data.area,                        })                    }                });                layer.open({                    type:1,                    content:$("#updateProduct"),                    area:["400px","350px"],                    title:'修改'                })            }else if(obj.event == 'delete'){                layer.confirm("确定要删除吗？",{icon:5},function (index) {                    var id = obj.data.id;                    $.ajax({                        url:"product/delete.do",                        dataType:"json",                        data:"id="+id,                        success:function (data) {                            if(data.isDelete){                                layer.msg("删除成功",{icon:1,time:2000});                                table.reload('product');                            }                        }                    })                })            }if (obj.event == 'gotoImage_') {location.href='图片管理.html?'+'id=' + encodeURI(obj.data.id);        }if (obj.event == 'setProperty') {            console.log(obj.data.id + "    setProperty")        }        });        form.on('submit(addSubmit)',function () {            $.ajax({                type:"post",                url:"product/insert.do",                data:$("#addProduct").serialize(),                success:function (data) {                    if(data.isAdd){                        /*layer.msg("图书添加成功", {icon: 1,time:3000});*/                        $("#addProduct")[0].reset();                        layer.confirm("添加成功,要退出添加界面吗？",{icon: 1},function (index) {                            layer.closeAll();                        });                        table.reload('product')                    }                },                dateType:"json"            });            return false;        });        form.on('submit(updateSubmit)',function () {            $.ajax({                type:"post",                url:"product/update.do",                data:$("#updateProduct").serialize(),                success:function (data) {                    console.log(data);                    if(data.isUpdate){                        layer.confirm("修改成功,要退出修改界面吗？",{icon: 1},function (index) {                            layer.closeAll();                        });                        table.reload('product')                    }                },                dateType:"json"            });            return false;        });    })</script></body></html>