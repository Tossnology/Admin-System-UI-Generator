<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>分类管理</title>    <link rel="stylesheet" href="layui/css/layui.css">    <script src="layui/layui.js"></script></head><body><div class="layui-form">    <!-- 此处可以编写个性化搜索 -->    <lable class="layui-form-label">id</lable>    <div class="layui-inline">        <input class="layui-input" id="searchName" type="text">    </div>    <button type="button" class="layui-btn" id="searchAnything">        <i class="layui-icon">&#xe615;</i>    </button></div><!-- 凡是看见department都用htmlId替换 --><table id="category" lay-filter="categoryTable"></table><!---------------------添加科室表格 start-------------------------------><form class="layui-form" id="addCategory" style="display: none;padding: 20px 30px 0 0" lay-filter="insertFilter">    <div class="layui-form-item">        <label class="layui-form-label">ID</label>        <div class="layui-input-inline">            <input type="text" name="ID" placeholder="请输入ID" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">图片</label>        <div class="layui-input-inline">            <input type="text" name="图片" placeholder="请输入图片" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">分类名称</label>        <div class="layui-input-inline">            <input type="text" name="分类名称" placeholder="请输入分类名称" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <div class="layui-input-block">            <button class="layui-btn" lay-submit lay-filter="addSubmit">立即提交</button>            <button type="reset" class="layui-btn layui-btn-primary">重置</button>        </div>    </div></form><!---------------------添加文章表格 end-------------------------------><!---------------------修改文章表格 start-------------------------------><form class="layui-form" id="updateCategory" style="display: none;padding: 20px 30px 0 0" lay-filter="updateFilter">    <div class="layui-form-item">        <label class="layui-form-label">ID</label>        <div class="layui-input-inline">            <input type="text" name="ID" placeholder="请输入ID" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">图片</label>        <div class="layui-input-inline">            <input type="text" name="图片" placeholder="请输入图片" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">分类名称</label>        <div class="layui-input-inline">            <input type="text" name="分类名称" placeholder="请输入分类名称" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <div class="layui-input-block">            <button class="layui-btn" lay-submit lay-filter="updateSubmit">立即提交</button>            <button type="reset" class="layui-btn layui-btn-primary">重置</button>        </div>    </div></form><!---------------------修改文章表格 end-------------------------------><!--===============添加、批量删除工具条 start===================--><script type="text/html" id="toolbar2">    <a class="layui-btn layui-btn-sm" lay-event="add">添加</a>    <a class="layui-btn layui-btn-sm layui-btn-danger" lay-event="deleteMany">批量删除</a></script><!--===============添加、批量删除工具条 end  ===================--><script type="text/html" id="property">    <a class="layui-btn layui-btn-xs layui-btn-normal" lay-event="gotoProperty">详情</a></script><script type="text/html" id="product">    <a class="layui-btn layui-btn-xs layui-btn-normal" lay-event="gotoProduct">详情</a></script><!--===============删除、修改工具条 start===================--><script type="text/html" id="toolbar1">    <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="delete">删除</a></script><!--===============删除、修改工具条 end   ===================--><script>    layui.use(["form","layer","table"],function () {        var form = layui.form;        var layer = layui.layer;        var table = layui.table;        var $ = layui.$;        table.render({            elem:"#category",            limit:5,            limits:[5,10,15],            url:"category/select.do",            page:true,            toolbar:"#toolbar2",            cols:[[                {type:"checkbox"},                {field:"id",title:"ID"},                {field:"image",title:"图片"},                {field:"name",title:"分类名称"},                {title:"属性管理",toolbar:'#property'},                {title:"产品管理",toolbar:'#product'},                {title:"修改/删除",toolbar:'#toolbar1'}            ]]        });        $("#searchAnything").click(function () {            table.reload('category',{                where:{                    id:$("#searchName").val(),                },                page:{                    curr:1                }            })        });        table.on('toolbar(categoryTable)',function (obj) {            var checkStatus = table.checkStatus(obj.config.id);            console.log(obj.config.id);            if(obj.event =='add'){                layer.open({                    type:1,                    content:$("#addCategory"),                    area:["400px","350px"],                    title:'添加分类'                })            }else if(obj.event == 'deleteMany'){                var array = checkStatus.data;                if(array.length == 0){                    layer.msg("请至少选择一个复选框",{icon:5,time:2000});                    return;                }                layer.confirm("检查一下别错删哦！",{icon:6},function () {                    var ids = [];                    for(var i=0;i<array.length;i++){                        ids.push(array[i].id);                    }                    $.ajax({                        url:"category/deleteMany.do",                        data:"ids="+ids,                        dataType:"json",                        success:function (data) {                            if(data.isDelete){                                layer.msg("删除成功",{icon:6,time:2000});                                table.reload('category')                            }else{                                layer.msg("删除失败",{icon:5,time:2000});                            }                        }                    })                })            }        });        table.on('tool(categoryTable)',function (obj) {            if(obj.event =='update'){                $.ajax({                    url:"category/selectOne.do",                    data:"id="+obj.data.id,                    dataType:"json",                    success:function (data) {                        form.val('updateFilter',{                            id:data.id,                            name:data.name,                            telephone:data.telephone,                            area:data.area,                        })                    }                });                layer.open({                    type:1,                    content:$("#updateCategory"),                    area:["400px","350px"],                    title:'修改'                })            }else if(obj.event == 'delete'){                layer.confirm("确定要删除吗？",{icon:5},function (index) {                    var id = obj.data.id;                    $.ajax({                        url:"category/delete.do",                        dataType:"json",                        data:"id="+id,                        success:function (data) {                            if(data.isDelete){                                layer.msg("删除成功",{icon:1,time:2000});                                table.reload('category');                            }                        }                    })                })            }if (obj.event == 'gotoProperty') {location.href='属性管理.html?'+'id=' + encodeURI(obj.data.id);        }if (obj.event == 'gotoProduct') {location.href='产品管理.html?'+'id=' + encodeURI(obj.data.id);        }        });        form.on('submit(addSubmit)',function () {            $.ajax({                type:"post",                url:"category/insert.do",                data:$("#addCategory").serialize(),                success:function (data) {                    if(data.isAdd){                        /*layer.msg("图书添加成功", {icon: 1,time:3000});*/                        $("#addCategory")[0].reset();                        layer.confirm("添加成功,要退出添加界面吗？",{icon: 1},function (index) {                            layer.closeAll();                        });                        table.reload('category')                    }                },                dateType:"json"            });            return false;        });        form.on('submit(updateSubmit)',function () {            $.ajax({                type:"post",                url:"category/update.do",                data:$("#updateCategory").serialize(),                success:function (data) {                    console.log(data);                    if(data.isUpdate){                        layer.confirm("修改成功,要退出修改界面吗？",{icon: 1},function (index) {                            layer.closeAll();                        });                        table.reload('category')                    }                },                dateType:"json"            });            return false;        });    })</script></body></html>