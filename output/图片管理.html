<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>图片管理</title>    <link rel="stylesheet" href="layui/css/layui.css">    <script src="layui/layui.js"></script></head><body><div class="layui-form">    <!-- 此处可以编写个性化搜索 -->    <lable class="layui-form-label">id</lable>    <div class="layui-inline">        <input class="layui-input" id="searchName" type="text">    </div>    <button type="button" class="layui-btn" id="searchAnything">        <i class="layui-icon">&#xe615;</i>    </button></div><!-- 凡是看见department都用htmlId替换 --><table id="image_" lay-filter="image_Table"></table><!---------------------添加科室表格 start-------------------------------><form class="layui-form" id="addImage_" style="display: none;padding: 20px 30px 0 0" lay-filter="insertFilter">    <div class="layui-form-item">        <label class="layui-form-label">ID</label>        <div class="layui-input-inline">            <input type="text" name="ID" placeholder="请输入ID" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">产品单个图片缩略图</label>        <div class="layui-input-inline">            <input type="text" name="产品单个图片缩略图" placeholder="请输入产品单个图片缩略图" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <div class="layui-input-block">            <button class="layui-btn" lay-submit lay-filter="addSubmit">立即提交</button>            <button type="reset" class="layui-btn layui-btn-primary">重置</button>        </div>    </div></form><!---------------------添加文章表格 end-------------------------------><!---------------------修改文章表格 start-------------------------------><form class="layui-form" id="updateImage_" style="display: none;padding: 20px 30px 0 0" lay-filter="updateFilter">    <div class="layui-form-item">        <label class="layui-form-label">ID</label>        <div class="layui-input-inline">            <input type="text" name="ID" placeholder="请输入ID" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <label class="layui-form-label">产品单个图片缩略图</label>        <div class="layui-input-inline">            <input type="text" name="产品单个图片缩略图" placeholder="请输入产品单个图片缩略图" autocomplete="off" class="layui-input">        </div>    </div>    <div class="layui-form-item">        <div class="layui-input-block">            <button class="layui-btn" lay-submit lay-filter="updateSubmit">立即提交</button>            <button type="reset" class="layui-btn layui-btn-primary">重置</button>        </div>    </div></form><!---------------------修改文章表格 end-------------------------------><!--===============添加、批量删除工具条 start===================--><script type="text/html" id="toolbar2">    <a class="layui-btn layui-btn-sm" lay-event="add">添加</a>    <a class="layui-btn layui-btn-sm layui-btn-danger" lay-event="deleteMany">批量删除</a></script><!--===============添加、批量删除工具条 end  ===================--><!--===============删除、修改工具条 start===================--><script type="text/html" id="toolbar1">    <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="delete">删除</a></script><!--===============删除、修改工具条 end   ===================--><script>    layui.use(["form","layer","table"],function () {        var form = layui.form;        var layer = layui.layer;        var table = layui.table;        var $ = layui.$;        table.render({            elem:"#image_",            limit:5,            limits:[5,10,15],            url:"image_/select.do",            page:true,            toolbar:"#toolbar2",            cols:[[                {type:"checkbox"},                {field:"id",title:"ID"},                {field:"simple",title:"产品单个图片缩略图"},                {title:"操作",toolbar:'#toolbar1'}            ]]        });        $("#searchAnything").click(function () {            table.reload('image_',{                where:{                    id:$("#searchName").val(),                },                page:{                    curr:1                }            })        });        table.on('toolbar(image_Table)',function (obj) {            var checkStatus = table.checkStatus(obj.config.id);            console.log(obj.config.id);            if(obj.event =='add'){                layer.open({                    type:1,                    content:$("#addImage_"),                    area:["400px","350px"],                    title:'添加图片'                })            }else if(obj.event == 'deleteMany'){                var array = checkStatus.data;                if(array.length == 0){                    layer.msg("请至少选择一个复选框",{icon:5,time:2000});                    return;                }                layer.confirm("检查一下别错删哦！",{icon:6},function () {                    var ids = [];                    for(var i=0;i<array.length;i++){                        ids.push(array[i].id);                    }                    $.ajax({                        url:"image_/deleteMany.do",                        data:"ids="+ids,                        dataType:"json",                        success:function (data) {                            if(data.isDelete){                                layer.msg("删除成功",{icon:6,time:2000});                                table.reload('image_')                            }else{                                layer.msg("删除失败",{icon:5,time:2000});                            }                        }                    })                })            }        });        table.on('tool(image_Table)',function (obj) {            if(obj.event =='update'){                $.ajax({                    url:"image_/selectOne.do",                    data:"id="+obj.data.id,                    dataType:"json",                    success:function (data) {                        form.val('updateFilter',{                            id:data.id,                            name:data.name,                            telephone:data.telephone,                            area:data.area,                        })                    }                });                layer.open({                    type:1,                    content:$("#updateImage_"),                    area:["400px","350px"],                    title:'修改'                })            }else if(obj.event == 'delete'){                layer.confirm("确定要删除吗？",{icon:5},function (index) {                    var id = obj.data.id;                    $.ajax({                        url:"image_/delete.do",                        dataType:"json",                        data:"id="+id,                        success:function (data) {                            if(data.isDelete){                                layer.msg("删除成功",{icon:1,time:2000});                                table.reload('image_');                            }                        }                    })                })            }        });        form.on('submit(addSubmit)',function () {            $.ajax({                type:"post",                url:"image_/insert.do",                data:$("#addImage_").serialize(),                success:function (data) {                    if(data.isAdd){                        /*layer.msg("图书添加成功", {icon: 1,time:3000});*/                        $("#addImage_")[0].reset();                        layer.confirm("添加成功,要退出添加界面吗？",{icon: 1},function (index) {                            layer.closeAll();                        });                        table.reload('image_')                    }                },                dateType:"json"            });            return false;        });        form.on('submit(updateSubmit)',function () {            $.ajax({                type:"post",                url:"image_/update.do",                data:$("#updateImage_").serialize(),                success:function (data) {                    console.log(data);                    if(data.isUpdate){                        layer.confirm("修改成功,要退出修改界面吗？",{icon: 1},function (index) {                            layer.closeAll();                        });                        table.reload('image_')                    }                },                dateType:"json"            });            return false;        });    })</script></body></html>